parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KIzB":[function(require,module,exports) {
"use strict";var t=document.documentElement,e=document.querySelector(".game_score"),r=document.querySelector(".game_best"),n=document.querySelector(".info"),a=document.querySelector(".button, .start"),o=document.querySelector(".message_start"),c=document.querySelector(".message_win"),i=document.querySelector(".message_lose"),s=document.querySelectorAll(".field_cell"),l=0,f=0,u=null,d=null,v=null,m=3,h=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];function k(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return s[4*t+e]}function L(){for(var t=h.some(function(t){return t.includes(0)}),e=null,r=null,n=1;n<=m;n++)for(var a=0;a<=m;a++)h[n][a]===h[n-1][a]&&(e=!0);for(var o=0;o<=m;o++)for(var c=1;c<=m;c++)h[o][c]===h[o][c-1]&&(r=!0);if((t||e||r)&&(v=!0),!v)return i.classList.remove("hidden");for(var s=Math.random(),l=null,f=Math.round(3*Math.random()+0),u=Math.round(3*Math.random()+0),d=0;d<=100;d++){if(0===h[f][u]){l=s>.1?2:4,h[f][u]=l,k(f,u).textContent=l,k(f,u).classList.add("field_cell--".concat(l));break}s=Math.random(),f=Math.round(3*Math.random()+0),u=Math.round(3*Math.random()+0)}v=null}function b(){window.setTimeout(L,300),v=null}function g(t,e){if(h[t][e]>0)for(var r=2;r<=2048;r*=2)if(r===h[t][e]){k(t,e).classList.add("field_cell--".concat(r));break}return s}function _(t,e){if(h[t][e]>0){for(var r=[],n=2;n<=2048;n*=2)k(t,e).classList.contains("field_cell--".concat(n))&&r.push("field_cell--".concat(n));r.map(function(r){return k(t,e).classList.remove(r)})}return s}function w(t,n,a,o){o?(h[n][a]=u+o,l+=h[n][a],e.textContent=l,f<l&&(f=l),r.textContent=f,h[n][a]>=2048&&c.classList.remove("hidden")):h[n][a]=u,"r"===t?(k(n,a).textContent=h[d][a],g(n,a)):(k(n,a).textContent=h[n][d],g(n,a))}function x(t,e){_(t,e),h[t][e]=0,k(t,e).textContent=""}function y(){for(var t=0;t<h.length;t++)for(var e=0;e<h[t].length;e++)if(0!==h[t][e]&&0!==t){u=h[t][e];for(var r=t-1;r>=0;){if(0===h[r][e]){if(0!==r){r--;continue}v=!0,w("r",d=r,e),x(t,e);break}if(h[r][e]===u){v=!0,w("r",d=r,e,u),x(t,e);break}if(h[r][e]>0){d=r+1,t-r>1&&(v=!0,w("r",d,e),x(t,e)),w("r",d,e);break}}}v&&b()}function C(){for(var t=h.length-1;t>=0;t--)for(var e=0;e<h.length;e++)if(0!==h[t][e]&&3!==t){u=h[t][e];for(var r=t+1;r<=h.length;){if(0===h[r][e]){if(3!==r){r++;continue}v=!0,w("r",d=r,e),x(t,e);break}if(h[r][e]===u){v=!0,w("r",d=r,e,u),x(t,e);break}if(h[r][e]>0){d=r-1,r-t>1&&(v=!0,w("r",d,e),x(t,e));break}}}v&&b()}function M(){for(var t=0;t<h.length;t++)for(var e=h[t].length-1;e>=0;e--)if(0!==h[t][e]&&3!==e){u=h[t][e];for(var r=e+1;r<=3;){if(0===h[t][r]){if(3!==r){r++;continue}v=!0,w("c",t,d=r),x(t,e);break}if(h[t][r]===u){v=!0,w("c",t,d=r,u),x(t,e);break}if(h[t][r]>0){d=r-1,r-e>1&&(v=!0,w("c",t,d),x(t,e));break}}}v&&b()}function S(){for(var t=0;t<h.length;t++)for(var e=0;e<h[t].length;e++)if(0!==h[t][e]&&0!==e){u=h[t][e];for(var r=e-1;r>=0;){if(0===h[t][r]){if(0!==r){r--;continue}v=!0,w("c",t,d=r),x(t,e);break}if(h[t][r]===u){v=!0,w("c",t,d=r,u),x(t,e);break}if(h[t][r]>0){d=r+1,e-r>1&&(v=!0,w("c",t,d),x(t,e));break}}}v&&b()}a.addEventListener("click",function(){if(a.classList.contains("start"))a.classList.remove("start"),a.classList.add("restart"),a.textContent="Restart",o.classList.add("hidden"),L(),L(),n.classList.add("active");else{a.classList.remove("restart"),a.classList.add("start"),a.textContent="Start",e.textContent=0,l=0,n.classList.remove("active"),i.classList.add("hidden"),o.classList.remove("hidden");for(var t=[],r=2;r<=2048;r*=2)t.push("field_cell--".concat(r));s.forEach(function(e){return e.textContent="",t.map(function(t){return e.classList.remove(t)}),e}),h=h.map(function(t){return t.map(function(){return 0})})}}),t.addEventListener("keydown",function(t){t.preventDefault();var e=t.key;switch(!0){case"ArrowUp"===e:y();break;case"ArrowDown"===e:C();break;case"ArrowRight"===e:M();break;case"ArrowLeft"===e:S()}});
},{}]},{},["KIzB"], null)
//# sourceMappingURL=main.62f74cb4.js.map